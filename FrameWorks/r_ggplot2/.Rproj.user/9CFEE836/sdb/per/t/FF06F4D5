{
    "collab_server" : "",
    "contents" : "library(ggplot2)\nlibrary(plotly)\nlibrary(gcookbook)\nlibrary(gridExtra)\nlibrary(dplyr)\n########################## 基本条形图 #########################\n## 知识点总结：\n# (1) 默认y轴(连续)为每个X变量(类别)对应的Y变量的值; \n# (2) 要将y轴显示为X变量(连续)的个数, 即count(X), 则不需要将y映射到数据,\n#且用默认的geom_bar()或geom_bar(stat = 'count')\n# (3) \n\n####################### Parameter ##############################\ngeom_bar(mapping = NULL, \n         data = NULL, \n         stat = \"count\", position = \"stack\", ...,\n         fil = '',\n         colour = '',\n         width = NULL, binwidth = NULL, \n         na.rm = FALSE, \n         show.legend = NA, \n         inherit.aes = TRUE)\nstat_count(mapping = NULL,\n           data = NULL, \n           geom = \"bar\", position = \"stack\", ..., \n           width = NULL, \n           na.rm = FALSE, \n           show.legend = NA, \n           inherit.aes = TRUE)\n# geom_bar(stat = '')\n# geom_bar(stat = '', fill = '', color = '')\n# \n\n\n\n\n#################################################################\n\n##################################################################\n#   geom_bar() or geom_bar(stat = 'count') or geom_histogram()\n##################################################################\n# 1. 如果x轴为离散变量\np1 = ggplot(data = diamonds, aes(x = cut)) +\n    geom_bar()\np1\n\n# or\n\n# 好像geom_bar(stat = 'bin')不能用了, 改为geom_bar(stat = 'count')\np11 = ggplot(data = diamonds, aes(x = cut)) +\n    geom_bar(stat = 'count')\np11\n\n\n# 2. 如果x轴为连续变量, 则变为直方图\np2 = ggplot(data = diamonds, aes(x = carat)) +\n    geom_bar()\np2\n\np21 = ggplot(data = diamonds, aes(x = carat)) +\n    geom_bar(stat = 'count')\np21\n\np22 = ggplot(data = diamonds, aes(x = carat)) + \n    geom_histogram()\np22\n\n##############################################################\n#----------------- geom_bar(stat = 'identity') ---------------\n##############################################################\n# 1. 如果x轴为离散变量\nstr(pg_mean)\np1 = ggplot(data = pg_mean, aes(x = group, y = weight)) + \n    geom_bar(stat = 'identity')\np1\n\n\n# 2. 如果x轴为连续变量(注意下面两个图的差别)\nstr(BOD)\np2 = ggplot(data = BOD, aes(x = Time, y = demand)) + \n    geom_bar(stat = 'identity')\np2 # Time = 6对应一个空Bar\n\np21 = ggplot(data = BOD, aes(x = factor(Time), y = demand)) +\n    geom_bar(stat = 'identity')\np21 # Time = 6没有任何东西\n\ngrid.arrange(p2, p21, ncol = 2)\n\n#####################################################################\n##                   geom_bar(stat = '', fill = '', colour = '')\n#####################################################################\n\np1 = ggplot(data = pg_mean, aes(x = group, y = weight)) + \n    geom_bar(stat = 'identity', fill = 'lightblue')\np1\n\np11 = ggplot(data = pg_mean, aes(x = group, y = weight)) +\n    geom_bar(stat = 'identity', fill = 'lightblue', colour = 'black')\np11\n\n\n############################# 有问题, 不能运行#######################\n## ggplot(aes(fill = ))\n## geom_bar(position = 'dodge')\n\np12 = ggplot(data = cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) + \n    geom_bar(position = 'dodge')\np12\n\np13 = ggplot(data = cabbage_exp, aes(x = Date, y = Weight, fill = Cultivar)) +\n    geom_bar(position = 'dodge', colour = 'black') +\n    scale_fill_brewer(palette = 'Pastel1')\np13\n\np14 = ggplot(data = cabbage_exp, aes(x = Date, y = Weight, fill = Cultival)) +\n    geom_bar(position = 'dodge', colour = 'black') +\n    scale_fill_manual(palette = 'Pastel1')\np14\n######################################################################\n\n?reorder\n?rank\n\nupc = uspopchange %>%\n    filter(rank(Change) > 40)\np1 = ggplot(data = upc, aes(x = reorder(Abb, Change), y = Change, fill = Region)) +\n    geom_bar(stat = 'identity', colour = 'black') +\n    scale_fill_manual(values = c('#669933', '#FFCC66')) +\n    xlab('Stata')\np1\n",
    "created" : 1491237835430.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1585431869",
    "id" : "FF06F4D5",
    "lastKnownWriteTime" : 1491666990,
    "last_content_update" : 1491666990632,
    "path" : "E:/GitHub/ggplot2/R Graphics Cookbook/cha3/bar.R",
    "project_path" : "R Graphics Cookbook/cha3/bar.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}